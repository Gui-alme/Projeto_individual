<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style-all.css">
    <link rel="stylesheet" href="../css/quiz.css">
    <title>Quiz</title>
</head>
<body onload="atualizarQuiz()">
    <header>
        <div class="container-cabecalho">
            <a href="../index.html">
                <div class="imagemRiven">
                    <h1>RIVEN</h1>
                    <img class="logoImg" src="../assets/img/rivenSword.png" alt="imagem da riven">
                </div>
            </a>
            <nav>
                <ul class="menu">
                    <a href="#"><li>Avaliações</li></a>
                    <a href="#"><li>Guilherme<img class="iconPerfil" src="../assets/svg/iconPerfil.svg" alt="icone perfil usuário"></li></a>
                </ul>
            </nav>
        </div>
    </header>
    <main>
        <section class="container">
            <div id="containerQuiz" class="containerQuiz">
                <!-- <h1 class="titleQuiz">QUIZ<span class="titleQuizRiven">RIVEN</span></h1> -->
                <!-- modal -->
                <!-- <p class="perguntaQuiz">1. "Pergunta"</p>
                <div class="respostasQuiz"><span class="letra">A.</span><p>Asahsauhsuahsua</p></div>
                <div class="respostasQuiz"><span class="letra">B.</span><p>Asahsauhsuahsua</p></div>
                <div class="respostasQuiz"><span class="letra">C.</span><p>Asahsauhsuahsua</p></div>
                <div class="respostasQuiz"><span class="letra">D.</span><p>Asahsauhsuahsua</p></div> -->
            </div>
        </section>
    </main>
    <footer>

    </footer>
</body>
</html>
<script>
var contadorQuiz = 0;
function atualizarQuiz() {
    fetch("/quiz/listar").then(function (resposta) {
        if (resposta.ok) {
            if (resposta.status == 204) {
                throw "Nenhum resultado encontrado!!";
            }
            resposta.json().then(function (resposta) {
                console.log("Dados recebidos: ", JSON.stringify(resposta));

                var containerQuiz = document.getElementById("containerQuiz")
                for (let i = 0; i <= contadorQuiz; i++) {
                    containerQuiz.innerHTML = "";
                    var publicacao = resposta[i];
                    
                    var titulo = document.createElement("h1")
                    var spanTitulo = document.createElement("span")
                    var pergunta = document.createElement("p");
                    var spanLetraA = document.createElement("span");
                    var spanLetraB = document.createElement("span");
                    var spanLetraC = document.createElement("span");
                    var spanLetraD = document.createElement("span");

                    var resposta1 = document.createElement("p");
                    var resposta2 = document.createElement("p");
                    var resposta3 = document.createElement("p");
                    var resposta4 = document.createElement("p");
                    
                    var respostaQuiz1 = document.createElement("div");
                    var respostaQuiz2 = document.createElement("div");
                    var respostaQuiz3 = document.createElement("div");
                    var respostaQuiz4 = document.createElement("div");

                    titulo.className = "titleQuiz";
                    titulo.innerHTML = "QUIZ";
                    spanTitulo.className = "titleQuizRiven";
                    spanTitulo.innerHTML = "  RIVEN"

                    pergunta.className = "perguntaQuiz"
                    pergunta.innerHTML = `${publicacao.idPergunta}. ${publicacao.descricao}`;

                    spanLetraA.className = "letra";
                    spanLetraA.innerHTML = "A.";
                    spanLetraB.className = "letra";
                    spanLetraB.innerHTML = "B.";
                    spanLetraC.className = "letra";
                    spanLetraC.innerHTML = "C.";
                    spanLetraD.className = "letra";
                    spanLetraD.innerHTML = "D.";
                    
                    resposta1.innerHTML = publicacao.resposta1;
                    resposta2.innerHTML = publicacao.resposta2;
                    resposta3.innerHTML = publicacao.resposta3;
                    resposta4.innerHTML = publicacao.resposta4;

                    respostaQuiz1.className = "respostasQuiz";
                    respostaQuiz1.setAttribute("onclick", "atualizarQuiz(), respostaErrada()");
                    respostaQuiz2.className = "respostasQuiz";
                    respostaQuiz2.setAttribute("onclick", "atualizarQuiz(), respostaErrada()");
                    respostaQuiz3.className = "respostasQuiz";
                    respostaQuiz3.setAttribute("onclick", "atualizarQuiz(), respostaErrada()");
                    respostaQuiz4.className = "respostasQuiz";
                    respostaQuiz4.setAttribute("onclick", "atualizarQuiz(), respostaErrada()");


                    respostaQuiz1.appendChild(spanLetraA);
                    respostaQuiz1.appendChild(resposta1);
                    respostaQuiz2.appendChild(spanLetraB);
                    respostaQuiz2.appendChild(resposta2);
                    respostaQuiz3.appendChild(spanLetraC);
                    respostaQuiz3.appendChild(resposta3);
                    respostaQuiz4.appendChild(spanLetraD);
                    respostaQuiz4.appendChild(resposta4);
                    titulo.appendChild(spanTitulo);
                    containerQuiz.appendChild(titulo);
                    containerQuiz.appendChild(pergunta);
                    containerQuiz.appendChild(respostaQuiz1);
                    containerQuiz.appendChild(respostaQuiz2);
                    containerQuiz.appendChild(respostaQuiz3);
                    containerQuiz.appendChild(respostaQuiz4);

                    // IF para adicionar o id na resposta certa
                    if(contadorQuiz == 0){
                        respostaQuiz1.setAttribute("onclick", "atualizarQuiz(), respostaCerta()")
                    } else if(contadorQuiz == 1){
                        respostaQuiz3.setAttribute("onclick", "atualizarQuiz(), respostaCerta()")
                    } else if(contadorQuiz == 2){
                        respostaQuiz4.setAttribute("onclick", "atualizarQuiz(), respostaCerta()")
                    } else if(contadorQuiz == 3){
                        respostaQuiz2.setAttribute("onclick", "atualizarQuiz(), respostaCerta()")
                    } else if(contadorQuiz == 4){
                        respostaQuiz1.setAttribute("onclick", "atualizarQuiz(), respostaCerta()")
                    } else if(contador == 5){
                        relatorio();
                    }
                }
                contadorQuiz += 1;
            });
        } else {
            throw ('Houve um erro na API!');
        }
    }).catch(function (resposta) {
        console.error(resposta);
    });
}

var certas = 0;
var erradas = 0;
function respostaCerta(){
    certas += 1;
}
function respostaErrada(){
    erradas += 1;
}
function relatorio(){
    
}
</script>